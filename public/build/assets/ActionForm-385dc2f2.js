import{r as Y,T as O,o as n,c as h,w as r,f as c,a as o,e as k,d as i,g,b as l,t as m,u as t,p as $,F as v,j as _,D as x,v as S,n as R}from"./app-f09a3df6.js";import{h as T}from"./moment-fbc5633a.js";import{_ as E}from"./ActionMessage-727524af.js";import{_ as L}from"./ActionSection-5a805f42.js";import{S as P}from"./SectionBorder-bde15d73.js";import{a as V,_ as w}from"./TextInput-4baff96a.js";import{_ as f}from"./InputLabel-a1e17fae.js";import{_ as G}from"./PartialFormSection-be3665ea.js";import{_ as H}from"./PrimaryButton-27c713e2.js";import{_ as I}from"./CalendarButton-e1a7e410.js";import{_ as D}from"./NotificationButton-6eb83ac1.js";import{_ as F}from"./TextArea-4c8c0cab.js";import{D as J}from"./DeleteButton-fd795ea7.js";import"./SectionTitle-bebe89be.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                     */const K={class:"flex space-x-2 justify-end"},Q={class:"w-full text-sm text-gray-600"},W={class:"w-full whitespace-nowrap"},X=o("thead",null,[o("tr",{class:"text-left font-bold"},[o("th",{class:"pb-4 pt-6 px-6"},"Action"),o("th",{class:"pb-4 pt-6 px-6"},"Responsible"),o("th",{class:"pb-4 pt-6 px-6"},"Due Date")])],-1),Z={class:"border-t"},ee={class:"border-t"},se={class:"border-t"},te={class:"border-t"},oe={class:"col-span-6 sm:col-span-4"},le=["error"],ae=["value"],ne={class:"col-span-6 sm:col-span-4"},re={class:"col-span-6 sm:col-span-4"},ie=["onUpdate:modelValue","error"],de=["value"],ce={class:"col-span-1 sm:col-span-1 ml-2 mt-8"},ue=["onClick"],me={class:"col-span-1 sm:col-span-1 ml-2 mt-8"},_e=["onClick"],fe={class:"col-span-6 sm:col-span-4"},pe={class:"col-span-4 sm:col-span-2"},ge={class:"col-span-1 sm:col-span-1 ml-2 mt-8"},ve=["onClick"],be={class:"col-span-1 sm:col-span-1 ml-2 mt-8"},ye=["onClick"],he={class:"col-span-6 sm:col-span-4"},ke=["error"],xe=["value"],Ve={class:"col-span-6 sm:col-span-4"},we={class:"col-span-6 sm:col-span-4"},Te={__name:"ActionForm",props:{users:Array,agendas:Array,statuses:Array,user:Object,sessions:Array,actions:Array,statuses:Array,meeting:Object,can:Object},setup(u){const A=u,b=Y(!1);T().format("YYYY-MM-DD");const e=O({agenda_id:null,name:"test",actioners:[{actioner_id:null}],due_date:null,reminders:[{reminder:null}],status_id:null,notes:"",as_of_date:null,meeting_id:A.meeting.id}),B=()=>{e.post(route("actions.store"),{preserveScroll:!0,onSuccess:()=>e.reset()})},N=()=>{e.post(route("notifications.action",A.meeting.id),{preserveScroll:!0})},z=()=>{e.post(route("schedules.conflict",A.meeting.id),{preserveScroll:!0})},M=()=>{e.post(route("schedules.conflict",A.meeting.id),{preserveScroll:!0})},j=()=>b.value=!b.value,q=y=>{e.delete(route("actions.destroy",y),{preserveScroll:!0,onFinish:()=>e.reset()})},C=(y,a)=>{a.push({})},U=(y,a)=>{a.splice(y,1)};return(y,a)=>(n(),h(L,null,{title:r(()=>[c(" Actions ")]),description:r(()=>[c(" Manage Actions ")]),content:r(()=>[o("div",K,[u.can.organize_meeting?(n(),h(D,{key:0,onClick:N},{default:r(()=>[c(" Send Notification ")]),_:1})):k("",!0),u.can.organize_meeting?(n(),h(I,{key:1,onClick:z},{default:r(()=>[c(" Bring Forward ")]),_:1})):k("",!0),u.can.organize_meeting?(n(),h(D,{key:2,onClick:M},{default:r(()=>[c(" Export ")]),_:1})):k("",!0)]),o("div",Q,[o("table",W,[X,o("tbody",null,[(n(!0),i(v,null,g(u.actions,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-100 focus-within:bg-gray-100"},[o("td",Z,[l(t($),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/actions/${s.id}`},{default:r(()=>[c(m(s.name),1)]),_:2},1032,["href"])]),o("td",ee,[l(t($),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/actions/${s.id}`},{default:r(()=>[c(m(s.first_name)+" "+m(s.last_name),1)]),_:2},1032,["href"])]),o("td",se,[l(t($),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/actions/${s.id}`},{default:r(()=>[c(m(s.due_date),1)]),_:2},1032,["href"])]),o("td",te,[u.can.organize_meeting?(n(),h(J,{key:0,onDelete:p=>q(`${s.id}`)},{default:r(()=>[c("Delete")]),_:2},1032,["onDelete"])):k("",!0)])]))),128))])])]),u.can.organize_meeting?(n(),i("button",{key:0,class:"flex items-center px-6 py-4 focus:text-indigo-500",onClick:j},[_(o("p",null,"Add Meeting Action",512),[[x,!b.value]]),_(o("p",null,"Close Meeting Action",512),[[x,b.value]])])):k("",!0),l(P),_(o("div",null,[l(G,{onSubmitted:B},{form:r(()=>[o("div",oe,[l(f,{for:"agenda_id",value:"Select agenda"}),_(o("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).agenda_id=s),error:t(e).errors.agenda_id,class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",label:"User",required:""},[(n(!0),i(v,null,g(u.agendas,s=>(n(),i("option",{key:s.id,value:s.id},m(s.title),9,ae))),128))],8,le),[[S,t(e).agenda_id]])]),o("div",ne,[l(f,{for:"name",value:"Action"}),l(F,{id:"name",modelValue:t(e).name,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).name=s),type:"textarea",class:"mt-1 block w-full",autocomplete:"name",required:""},null,8,["modelValue"]),l(V,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),(n(!0),i(v,null,g(t(e).actioners,(s,p)=>(n(),i("div",{key:`Actioner-${p}`,class:"col-span-6 sm:col-span-4 flex"},[o("div",re,[l(f,{for:"actioner_id",value:`Assined to ${p+1}`},null,8,["value"]),_(o("select",{id:"actioner_id","onUpdate:modelValue":d=>s.actioner_id=d,error:t(e).errors.actioner_id,class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",label:"User",required:""},[(n(!0),i(v,null,g(u.users,d=>(n(),i("option",{key:d.id,value:d.id},m(d.first_name)+" "+m(d.last_name),9,de))),128))],8,ie),[[S,s.actioner_id]])]),o("div",ce,[o("button",{type:"button",onClick:d=>C(s,t(e).actioners),class:"text-xl"},"+",8,ue)]),o("div",me,[_(o("button",{type:"button",onClick:d=>U(p,t(e).actioners),class:"text-xl"},"-",8,_e),[[x,t(e).actioners.length>1]])])]))),128)),o("div",fe,[l(f,{for:"due_date",value:"Due Date"}),l(w,{id:"due_date",modelValue:t(e).due_date,"onUpdate:modelValue":a[2]||(a[2]=s=>t(e).due_date=s),type:"date",class:"mt-1 block w-full",autocomplete:"due_date",required:""},null,8,["modelValue"]),l(V,{message:t(e).errors.due_date,class:"mt-2"},null,8,["message"])]),(n(!0),i(v,null,g(t(e).reminders,(s,p)=>(n(),i("div",{key:`Reminder-${p}`,class:"col-span-6 sm:col-span-4 flex"},[o("div",pe,[l(f,{for:"reminder",value:"Remainder in days"}),l(w,{id:"reminder",modelValue:s.reminder,"onUpdate:modelValue":d=>s.reminder=d,type:"number",min:"1",class:"mt-1 block w-full",autocomplete:"reminder"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{message:t(e).errors.reminder,class:"mt-2"},null,8,["message"])]),o("div",ge,[o("button",{type:"button",onClick:d=>C(s,t(e).reminders),class:"text-xl"},"+",8,ve)]),o("div",be,[_(o("button",{type:"button",onClick:d=>U(p,t(e).reminders),class:"text-xl"},"-",8,ye),[[x,t(e).reminders.length>1]])])]))),128)),o("div",he,[l(f,{for:"status_id",value:"Status"}),_(o("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).status_id=s),error:t(e).errors.status_id,class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",label:"User"},[(n(!0),i(v,null,g(u.statuses,s=>(n(),i("option",{key:s.id,value:s.id},m(s.name),9,xe))),128))],8,ke),[[S,t(e).status_id]])]),o("div",Ve,[l(f,{for:"as_of_date",value:"As of"}),l(w,{id:"as_of_date",modelValue:t(e).as_of_date,"onUpdate:modelValue":a[4]||(a[4]=s=>t(e).as_of_date=s),type:"date",class:"mt-1 block w-full",autocomplete:"as_of_date"},null,8,["modelValue"]),l(V,{message:t(e).errors.as_of_date,class:"mt-2"},null,8,["message"])]),o("div",we,[l(f,{for:"notes",value:"Progress/ Note"}),l(F,{id:"notes",modelValue:t(e).notes,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).notes=s),type:"textarea",class:"mt-1 block w-full",autocomplete:"notes"},null,8,["modelValue"]),l(V,{message:t(e).errors.notes,class:"mt-2"},null,8,["message"])]),l(w,{id:"meeting_id",modelValue:t(e).meeting_id,"onUpdate:modelValue":a[6]||(a[6]=s=>t(e).meeting_id=s),type:"hidden"},null,8,["modelValue"]),l(w,{id:"meeting_id",modelValue:t(e).meeting_id,"onUpdate:modelValue":a[7]||(a[7]=s=>t(e).meeting_id=s),type:"hidden"},null,8,["modelValue"])]),actions:r(()=>[l(E,{on:t(e).recentlySuccessful,class:"mr-3"},{default:r(()=>[c(" Saved. ")]),_:1},8,["on"]),l(H,{class:R({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:r(()=>[c(" Save ")]),_:1},8,["class","disabled"])]),_:1})],512),[[x,b.value]])]),_:1}))}};export{Te as default};
