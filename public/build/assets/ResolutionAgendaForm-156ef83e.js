import{r as p,T as R,i as z,o as u,c as b,w as i,f as r,a as e,b as n,d as m,g as F,t as f,u as t,l as _,F as $,e as V,j as g,C as x,v as M,n as J}from"./app-ce82d174.js";import"./moment-fbc5633a.js";import{_ as L}from"./ActionMessage-5eb72edd.js";import{_ as q}from"./ActionSection-f152c0a9.js";import{S as G}from"./SectionBorder-c7c40d29.js";import{_ as A}from"./InputLabel-3887591b.js";import{_ as h,a as H}from"./TextInput-52876229.js";import{_ as K}from"./PartialFormSection-54e753cb.js";import{_ as Q}from"./PrimaryButton-199c8979.js";import{D as W}from"./DeleteButton-0502e728.js";import{E as X}from"./EditButton-68704c81.js";import{_ as Y}from"./NotificationButton-fc792beb.js";import{v as Z}from"./vue-filepond.esm-837a973d.js";import{p as ee,a as te}from"./filepond-plugin-image-preview.min-5cccdc19.js";import"./SectionTitle-1e8b720f.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                     *//* empty css                                                   */const se={class:"flex space-x-2 justify-end"},oe={class:"text-sm text-gray-600"},le={class:"w-full whitespace-nowrap"},ne=e("thead",null,[e("div",null,[e("tr",{class:"text-left font-bold"},[e("th",{class:"pb-4 pt-6 px-6"},"No"),e("th",{class:"pb-4 pt-6 px-6"},"Title"),e("th",{class:"pb-4 pt-6 px-6"},"Status")])])],-1),ie={class:"border-t"},ae={class:"border-t"},re={class:"border-t"},de={class:"border-t"},ue=["src"],ce={class:"col-span-6 sm:col-span-4"},pe={class:"col-span-6 sm:col-span-4"},me=["error"],fe=e("option",{value:"0"},"Draft",-1),_e=e("option",{value:"1"},"Final",-1),ge=[fe,_e],he={class:"col-span-6 sm:col-span-4"},Ue={__name:"ResolutionAgendaForm",props:{users:Array,user:Object,sessions:Array,agendas:Array,purposes:Array,documents:Array,resolution:Object},setup(y){const w=y,S=Z(te,ee),c=p(!1),v=p(!1);p(!1);const k=p(["index.html"]),s=R({id:null,title:null,presenter_id:null,contributor_id:null,purpose_id:null,external_url:null,recurring:!1,minutes:null,photo:[],agendable_type:"Resolution",resolution_id:w.resolution.id}),C=()=>{s.post(route("agendas.store"),{errorBag:"updateProfileInformation",preserveScroll:!0})},D=()=>{console.log("FilePond has initialized")},E=(a,o)=>{console.log("file processed",{error:a,file:o})},O=(a,o)=>{console.log("file added",{error:a,file:o})},P=a=>{console.log("FilePond updated"),s.photo=a.map(o=>o.file)},B=()=>(v.value=!1,c.value=!c.value),N=()=>(c.value=!1,v.value=!v.value),U=a=>{s.delete(route("agendas.destroy",a),{preserveScroll:!0})},j=a=>(agendaOnEdit=w.agendas.filter(o=>o.id==a),agendaOnEdit=Object.assign({},...agendaOnEdit),console.log("this is test "+JSON.stringify(agendaOnEdit)),N(),agendaOnEdit);return(a,o)=>{const T=z("icon");return u(),b(q,null,{title:i(()=>[r(" Documents ")]),description:i(()=>[r(" Manage Documents ")]),content:i(()=>[e("div",se,[n(Y,{onClick:a.documentOptions},{default:i(()=>[r(" Options ")]),_:1},8,["onClick"])]),e("div",oe,[e("table",le,[ne,e("tbody",null,[(u(!0),m($,null,F(y.agendas,(l,I)=>(u(),m("tr",{key:l.id,class:"hover:bg-gray-100 focus-within:bg-gray-100"},[e("div",null,[e("td",ie,[n(t(_),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/agendas/${l.id}`},{default:i(()=>[r(f(I+1),1)]),_:2},1032,["href"])]),e("td",ae,[n(t(_),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/agendas/${l.id}`},{default:i(()=>[r(f(l.title),1)]),_:2},1032,["href"])]),e("td",re,[n(t(_),{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/agendas/${l.id}`},{default:i(()=>[r(f(),1)]),_:2},1032,["href"])]),e("td",de,[n(X,{onSubmit:d=>j(`${l.id}`)},{default:i(()=>[r("Edit")]),_:2},1032,["onSubmit"]),n(W,{onDelete:d=>U(`${l.id}`)},{default:i(()=>[r("Delete")]),_:2},1032,["onDelete"])])]),(u(!0),m($,null,F(y.documents,d=>(u(),m("div",{key:d.id},[d.agenda_id==l.id?(u(),b(t(_),{key:0,class:"flex items-center px-6 py-4 focus:text-indigo-500",href:`/documents/${d.id}`},{default:i(()=>[e("img",{src:`http://localhost:8000/storage/icons/${d.extension}.png`,class:"image-fluid w-4 mr-2"},null,8,ue),r(" "+f(d.name)+" ",1),d.deleted_at?(u(),b(T,{key:0,name:"trash",class:"flex-shrink-0 ml-2 w-3 h-3 fill-gray-400"})):V("",!0)]),_:2},1032,["href"])):V("",!0)]))),128))]))),128))])])]),e("button",{class:"flex items-center px-6 py-4 focus:text-indigo-500",onClick:B},[g(e("p",null,"Add Agenda",512),[[x,!c.value]]),g(e("p",null,"Close Agenda Form",512),[[x,c.value]])]),n(G),g(e("div",null,[n(K,{onSubmitted:C},{form:i(()=>[e("div",ce,[n(A,{for:"title",value:"Title"}),n(h,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":o[0]||(o[0]=l=>t(s).title=l),type:"text",class:"mt-1 block w-full",autocomplete:"title"},null,8,["modelValue"]),n(H,{message:t(s).errors.title,class:"mt-2"},null,8,["message"])]),e("div",pe,[n(A,{for:"presenter_id",value:"Select presenter"}),g(e("select",{"onUpdate:modelValue":o[1]||(o[1]=l=>t(s).presenter_id=l),error:t(s).errors.presenter_id,class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",label:"Presenter"},ge,8,me),[[M,t(s).presenter_id]])]),e("div",he,[n(h,{id:"resolution_id",modelValue:t(s).resolution_id,"onUpdate:modelValue":o[2]||(o[2]=l=>t(s).resolution_id=l),type:"hidden"},null,8,["modelValue"]),n(h,{id:"resolution_id",modelValue:t(s).id,"onUpdate:modelValue":o[3]||(o[3]=l=>t(s).id=l),type:"hidden"},null,8,["modelValue"]),n(h,{id:"agendable_type",modelValue:t(s).agendable_type,"onUpdate:modelValue":o[4]||(o[4]=l=>t(s).agendable_type=l),type:"hidden"},null,8,["modelValue"]),n(t(S),{name:"test",ref_key:"pond",ref:k,"class-name":"my-pond","label-idle":"Drop files here...","allow-multiple":"true","allow-reorder":"true","max-files":"10","chunk-uploads":"true",files:a.myFiles,onInit:D,onUpdatefiles:P,onProcessfile:E,onAddfile:O},null,8,["files"])])]),actions:i(()=>[n(L,{on:t(s).recentlySuccessful,class:"mr-3"},{default:i(()=>[r(" Saved. ")]),_:1},8,["on"]),n(Q,{class:J({"opacity-25":t(s).processing}),disabled:t(s).processing},{default:i(()=>[r(" Save ")]),_:1},8,["class","disabled"])]),_:1})],512),[[x,c.value]])]),_:1})}}};export{Ue as default};
